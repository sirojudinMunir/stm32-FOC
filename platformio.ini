; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:genericSTM32F405RG]
platform = ststm32
board = genericSTM32F405RG
framework = stm32cube
extra_scripts = pre:link_hardfloat.py

upload_protocol = stlink
debug_tool = stlink
board_build.cmsis = true
; board_build.ldscript = STM32F405RGTX_FLASH.ld

build_flags =
    -O3
    -lc -lm -larm_cortexM4lf_math
    -ffast-math
    -fsingle-precision-constant
    --specs=nano.specs
    -fno-strict-aliasing -fno-optimize-sibling-calls
    -Wl,-u,_printf_float    
    
    -DHSE_VALUE=12000000U
    -DUSE_HAL_DRIVER
    -DHAL_NVIC_MODULE_ENABLED
    -DARM_MATH_CM4   

    -DHAL_CAN_MODULE_ENABLED

    -Isrc/Core/Inc
    -Isrc/USB_device/App
    -Isrc/USB_device/Target
    -Isrc/FreeRTOS/CMSIS_RTOS
    -Isrc/FreeRTOS/portable/GCC/ARM_CM4F
    -Isrc/FreeRTOS/include
    